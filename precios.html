
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="meta.title">TokenLens – Precios</title>
  <meta name="description" content="Planes de TokenLens: Trial y Pro. Señales y predicción cripto con modelos propios.">
  <link rel="stylesheet" href="assets/styles.css">

  <!-- Estilos complementarios para header/footer y pricing (idénticos al resto) -->
  <style>
    /* ===== Cool Header ===== */
    .site-nav{ background:rgba(255,255,255,.02); border-bottom:1px solid #1f2a44; }
    .nav-wrap{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:16px; }
    .site-brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text); font-weight:700; }
    .site-brand img{ width:24px; height:24px; }
    .site-links{ display:flex; gap:18px; align-items:center; }
    .site-links a{ color:var(--muted); text-decoration:none; padding:8px 10px; border-radius:10px; border:1px solid transparent; background:transparent; }
    .site-links a:hover{ color:#fff; border-color:#233251; background:#0f131a; }
    .site-links a.active, .site-links a[aria-current="page"]{ color:var(--text); border-color:#2a3a5c; background:#0f131a; position:relative; }
    .site-links a.active::after{ content:""; position:absolute; left:10px; right:10px; bottom:-7px; height:2px; background:linear-gradient(90deg,var(--primary),var(--accent)); border-radius:2px; }

    .nav-cta{ display:flex; align-items:center; gap:12px; }
    .btn{ display:inline-block; padding:10px 14px; border-radius:12px; border:1px solid #24324d; color:var(--text); text-decoration:none; background:#151922; }
    .btn:hover{ border-color:#2b3a5f; }
    .btn.primary{ background:linear-gradient(135deg,var(--primary),var(--accent)); border:0; color:#061018; font-weight:700; }

    .lang-wrap{ position:relative; }
    .lang-select{ appearance:none; -webkit-appearance:none; -moz-appearance:none; padding:10px 34px 10px 12px; border-radius:12px; background:#0f131a; color:var(--text); border:1px solid #24324d; }
    .lang-select:focus{ outline:2px solid #6ea8fe; outline-offset:2px; }
    .lang-wrap .chev{ position:absolute; right:10px; top:50%; transform:translateY(-50%); pointer-events:none; color:var(--muted); font-size:12px; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* ===== Layout / Cards ===== */
    .card{ background:#0f131a; border:1px solid #1f2430; border-radius:16px; padding:18px; }
    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    .muted{ color:var(--muted); }

    /* ===== Pricing UI extra ===== */
    .price-wrap{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin:6px 0 12px; }
    .price{ display:flex; align-items:baseline; gap:6px; font-weight:800; }
    .price .currency{ opacity:.9; }
    .price .amount{ font-size:34px; line-height:1; }
    .price .per{ color:var(--muted); font-size:14px; }
    .badge{ display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid #233251; background:#0f131a; color:#9ec3ff; }
    .billing-toggle{ display:inline-flex; gap:4px; padding:4px; border:1px solid #233251; border-radius:12px; background:#0e1320; }
    .billing-toggle button{ border:0; padding:8px 10px; border-radius:8px; color:#cdd7ee; background:transparent; cursor:pointer; font-weight:600; }
    .billing-toggle button.active{ background:#101726; color:#fff; border:1px solid #2a3a5c; }
    .save{ color:#8bd5ff; font-size:12px; margin-left:4px; }

    /* Responsive */
    @media (max-width:900px){
      .nav-wrap{ flex-wrap:wrap; }
      .site-links{ order:3; width:100%; justify-content:center; padding:8px 0; }
      .nav-cta{ order:2; margin-left:auto; }
      .grid-2{ grid-template-columns:1fr; }
    }
  </style>
</head>
<body>

  <!-- HEADER (cool) -->
  <header class="site-nav">
    <div class="container nav-wrap">
      <a class="site-brand" href="index.html" data-keep-lang>
        <img src="assets/logo.svg" alt="TokenLens" onerror="this.style.display='none'">
        <span>TokenLens</span>
      </a>

      <nav class="site-links">
        <a href="index.html#features" data-keep-lang data-i18n="nav.features">Características</a>
        <a href="precios.html" data-keep-lang data-i18n="nav.pricing">Precios</a>
        <a href="docs/README.html" data-keep-lang data-i18n="nav.docs">Docs</a>
      </nav>

      <div class="nav-cta">
        <a class="btn" href="descarga.html" data-keep-lang data-i18n="nav.download">Descargar</a>
        <a class="btn primary" href="#buy" data-keep-lang data-i18n="nav.buy">Comprar licencia</a>

        <label for="lang" class="sr-only">Language</label>
        <div class="lang-wrap">
          <select id="lang" class="lang-select" aria-label="Language">
            <option value="es">Español</option>
            <option value="en">English</option>
            <option value="pt">Português</option>
          </select>
          <span class="chev" aria-hidden>▾</span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container" style="padding:24px 0 0">
    <h1 data-i18n="pricing.heading">Precios</h1>
    <p class="muted" data-i18n="pricing.lead">
      Elegí el plan que se adapta a tu operación. Podés empezar gratis y actualizar cuando quieras.
    </p>

    <div class="grid-2" style="margin-top:16px">
      <!-- TRIAL -->
      <div class="card">
        <h3 data-i18n="pricing.trial.title">Trial</h3>
        <p data-i18n="pricing.trial.desc">1 token, modo rápido, sin soporte.</p>
        <ul>
          <li data-i18n="pricing.trial.li1">Colector (quick)</li>
          <li data-i18n="pricing.trial.li2">Entrenador y Predictor básicos</li>
          <li data-i18n="pricing.trial.li3">Exportación CSV</li>
        </ul>
        <a class="btn" href="descarga.html" data-keep-lang data-i18n="pricing.trial.cta">Descargar</a>
      </div>

      <!-- PRO -->
      <div class="card" id="buy" style="outline:2px solid var(--primary)">
        <div class="price-wrap">
          <span class="badge" data-i18n="pricing.badge.early">Precio lanzamiento</span>
          <div class="billing-toggle" role="tablist" aria-label="Billing period">
            <button type="button" id="btn-monthly" class="active" data-period="monthly" aria-selected="true" data-i18n="pricing.period.monthly">Mensual</button>
            <button type="button" id="btn-yearly" data-period="yearly" aria-selected="false">
              <span data-i18n="pricing.period.yearly">Anual</span>
              <span class="save" data-i18n="pricing.save">Ahorra 31%</span>
            </button>
          </div>
        </div>

        <h3 data-i18n="pricing.pro.title">Pro</h3>
        <div class="price" aria-live="polite">
          <span class="currency">USD</span>
          <span class="amount" id="price-amount">24</span>
          <span class="per" id="price-per" data-i18n="pricing.per.month">/mes</span>
        </div>
        <p class="muted" data-i18n="pricing.pro.desc">Múltiples tokens, FULL, soporte prioritario.</p>
        <ul>
          <li data-i18n="pricing.pro.f1">Colector + Entrenador FULL</li>
          <li data-i18n="pricing.pro.f2">BUY/SELL con umbrales y alertas</li>
          <li data-i18n="pricing.pro.f3">Soporte prioritario</li>
          <li data-i18n="pricing.pro.bot">Bot de ejecución automática (opcional)</li>
        </ul>
        <div class="cta" style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn primary" id="checkout-btn" href="https://tusitio.com/checkout?plan=pro&period=monthly&price=24" data-i18n="pricing.pro.cta">Comprar licencia</a>
          <a class="btn" href="docs/README.html" data-keep-lang data-i18n="pricing.pro.details">Ver detalles técnicos</a>
        </div>
        <p class="muted" style="margin-top:8px; font-size:13px">
          <span data-i18n="pricing.refund.note">Garantía: reembolso 7 días si no activaste la licencia.</span>
          <br><span data-i18n="pricing.tax.note">Impuestos pueden aplicar según tu país.</span>
        </p>
      </div>
    </div>

    <!-- FAQ -->
    <section class="card" style="margin-top:22px">
      <h3 data-i18n="pricing.faq.title">Preguntas frecuentes</h3>

      <h4 style="margin-top:10px" data-i18n="pricing.faq.datasource.q">¿De dónde recolecta datos TokenLens?</h4>
      <p class="muted" data-i18n="pricing.faq.datasource.a">
        Del mercado de exchanges vía APIs públicas (REST/WebSocket). Usamos REST para históricos (OHLCV/metadata)
        y WebSocket cuando hay streaming en vivo (trades/order book). No requerimos tus claves para generar señales;
        sólo si activás el bot de ejecución (read-only + permisos mínimos). También podés importar CSV propios.
      </p>

      <h4 style="margin-top:10px" data-i18n="pricing.faq.license.q">¿Cómo recibo mi licencia?</h4>
      <p class="muted" data-i18n="pricing.faq.license.a">
        Luego del pago te llega un archivo .jwt por email. Lo cargás en “Licencia” dentro de la app.
      </p>

      <h4 style="margin-top:10px" data-i18n="pricing.faq.device.q">¿La licencia es por PC?</h4>
      <p class="muted" data-i18n="pricing.faq.device.a">
        Sí, es por dispositivo. Si necesitás moverla, escribinos a soporte.
      </p>
    </section>
  </main>

  <!-- FOOTER (unificado con iconos CSS y newsletter) -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-col">
        <a class="site-brand" href="index.html" data-keep-lang>
          <img src="assets/logo.svg" alt="TokenLens" onerror="this.style.display='none'">
          <span>TokenLens</span>
        </a>
        <p class="muted" data-i18n="footer.tagline">Señales cripto con modelos reales.</p>

        <div class="social">
          <a href="https://x.com/tucuenta"  data-icon="x"  target="_blank" rel="noopener">Twitter</a>
          <a href="https://youtube.com/@tu"  data-icon="yt" target="_blank" rel="noopener">YouTube</a>
          <a href="https://t.me/tucanal"     data-icon="tg" target="_blank" rel="noopener">Telegram</a>
        </div>
      </div>

      <div class="footer-col">
        <h4 data-i18n="footer.product">Producto</h4>
        <ul class="footer-links">
          <li><a href="descarga.html" data-keep-lang data-i18n="nav.download">Descargar</a></li>
          <li><a href="precios.html" data-keep-lang data-i18n="nav.pricing">Precios</a></li>
          <li><a href="docs/README.html" data-keep-lang data-i18n="nav.docs">Docs</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4 data-i18n="footer.legal">Legal</h4>
        <ul class="footer-links">
          <li><a href="terminos.html" data-keep-lang data-i18n="footer.terms">Términos</a></li>
          <li><a href="privacidad.html" data-keep-lang data-i18n="footer.privacy">Privacidad</a></li>
          <li><a href="gracias.html" data-keep-lang data-i18n="footer.thanks">Gracias</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4 data-i18n="footer.news.title">Novedades</h4>
        <p class="muted" data-i18n="footer.news.copy">Te avisamos muy de vez en cuando.</p>
        <form id="newsletter-form">
          <input id="nl-email" type="email" required placeholder="tu@email.com" class="nl-input">
          <button class="btn primary" type="submit" data-i18n="footer.news.btn">Suscribirme</button>
        </form>
      </div>
    </div>

    <div class="container legal-bar">
      <span class="muted small" data-i18n="footer.copy">© 2025 TokenLens</span>
      <span class="muted small">v1</span>
    </div>
  </footer>

  <!-- i18n + lang persist + active link + billing toggle + newsletter -->
  <script>
    const translations = {
      es: {
        "meta.title": "TokenLens – Precios",
        "nav.features": "Características", "nav.pricing": "Precios", "nav.docs": "Docs",
        "nav.download": "Descargar", "nav.buy": "Comprar licencia",
        "pricing.heading": "Precios",
        "pricing.lead": "Elegí el plan que se adapta a tu operación. Podés empezar gratis y actualizar cuando quieras.",
        "pricing.trial.title": "Trial", "pricing.trial.desc": "1 token, modo rápido, sin soporte.",
        "pricing.trial.li1": "Colector (quick)", "pricing.trial.li2": "Entrenador y Predictor básicos", "pricing.trial.li3": "Exportación CSV",
        "pricing.trial.cta": "Descargar",

        "pricing.badge.early": "Precio lanzamiento",
        "pricing.period.monthly": "Mensual",
        "pricing.period.yearly": "Anual",
        "pricing.save": "Ahorra 31%",
        "pricing.per.month": "/mes",
        "pricing.per.year": "/año",

        "pricing.pro.title": "Pro",
        "pricing.pro.desc": "Múltiples tokens, FULL, soporte prioritario.",
        "pricing.pro.f1": "Colector + Entrenador FULL",
        "pricing.pro.f2": "BUY/SELL con umbrales y alertas",
        "pricing.pro.f3": "Soporte prioritario",
        "pricing.pro.bot": "Bot de ejecución automática (opcional)",
        "pricing.pro.cta": "Comprar licencia",

        "pricing.refund.note": "Garantía: reembolso 7 días si no activaste la licencia.",
        "pricing.tax.note": "Impuestos pueden aplicar según tu país.",

        "pricing.faq.title": "Preguntas frecuentes",
        "pricing.faq.datasource.q": "¿De dónde recolecta datos TokenLens?",
        "pricing.faq.datasource.a": "Del mercado de exchanges vía APIs públicas (REST/WebSocket). Usamos REST para históricos (OHLCV/metadata) y WebSocket cuando hay streaming en vivo (trades/order book). No requerimos tus claves para generar señales; sólo si activás el bot de ejecución (read-only + permisos mínimos). También podés importar CSV propios.",
        "pricing.faq.license.q": "¿Cómo recibo mi licencia?",
        "pricing.faq.license.a": "Luego del pago te llega un archivo .jwt por email. Lo cargás en “Licencia” dentro de la app.",
        "pricing.faq.device.q": "¿La licencia es por PC?",
        "pricing.faq.device.a": "Sí, es por dispositivo. Si necesitás moverla, escribinos a soporte.",

        "footer.product":"Producto","footer.legal":"Legal","footer.terms":"Términos","footer.privacy":"Privacidad","footer.thanks":"Gracias",
        "footer.tagline":"Señales cripto con modelos reales.","footer.news.title":"Novedades","footer.news.copy":"Te avisamos muy de vez en cuando.","footer.news.btn":"Suscribirme","footer.copy":"© 2025 TokenLens"
      },
      en: {
        "meta.title": "TokenLens – Pricing",
        "nav.features": "Features", "nav.pricing": "Pricing", "nav.docs": "Docs",
        "nav.download": "Download", "nav.buy": "Buy license",
        "pricing.heading": "Pricing",
        "pricing.lead": "Choose the plan that fits your workflow. Start free and upgrade anytime.",
        "pricing.trial.title": "Trial", "pricing.trial.desc": "1 token, quick mode, no support.",
        "pricing.trial.li1": "Collector (quick)", "pricing.trial.li2": "Basic Trainer & Predictor", "pricing.trial.li3": "CSV export",
        "pricing.trial.cta": "Download",

        "pricing.badge.early": "Early-bird",
        "pricing.period.monthly": "Monthly",
        "pricing.period.yearly": "Yearly",
        "pricing.save": "Save 31%",
        "pricing.per.month": "/mo",
        "pricing.per.year": "/yr",

        "pricing.pro.title": "Pro",
        "pricing.pro.desc": "Multiple tokens, FULL mode, priority support.",
        "pricing.pro.f1": "Collector + FULL Trainer",
        "pricing.pro.f2": "BUY/SELL with thresholds & alerts",
        "pricing.pro.f3": "Priority support",
        "pricing.pro.bot": "Automated execution bot (optional)",
        "pricing.pro.cta": "Buy license",

        "pricing.refund.note": "7-day refund if the license wasn’t activated.",
        "pricing.tax.note": "Taxes may apply depending on your country.",

        "pricing.faq.title": "FAQ",
        "pricing.faq.datasource.q": "Where does TokenLens get its data from?",
        "pricing.faq.datasource.a": "From exchange markets via public APIs (REST/WebSocket). REST for historicals (OHLCV/metadata) and WebSocket when live streaming is available (trades/order book). No API keys are required for signal generation; only if you enable the execution bot (read-only + minimum scopes). You can also import your own CSVs.",
        "pricing.faq.license.q": "How do I receive my license?",
        "pricing.faq.license.a": "After purchase you'll receive a .jwt file by email. Load it under “License” in the app.",
        "pricing.faq.device.q": "Is the license per PC?",
        "pricing.faq.device.a": "Yes, it's per device. If you need to move it, contact support.",

        "footer.product":"Product","footer.legal":"Legal","footer.terms":"Terms","footer.privacy":"Privacy","footer.thanks":"Thanks",
        "footer.tagline":"Real models. Real crypto signals.","footer.news.title":"Newsletter","footer.news.copy":"We’ll ping you rarely.","footer.news.btn":"Subscribe","footer.copy":"© 2025 TokenLens"
      },
      pt: {
        "meta.title": "TokenLens – Preços",
        "nav.features": "Recursos", "nav.pricing": "Preços", "nav.docs": "Docs",
        "nav.download": "Baixar", "nav.buy": "Comprar licença",
        "pricing.heading": "Preços",
        "pricing.lead": "Escolha o plano que se adapta à sua operação. Comece grátis e atualize quando quiser.",
        "pricing.trial.title": "Trial", "pricing.trial.desc": "1 token, modo rápido, sem suporte.",
        "pricing.trial.li1": "Coletor (quick)", "pricing.trial.li2": "Treinador e Previsor básicos", "pricing.trial.li3": "Exportação CSV",
        "pricing.trial.cta": "Baixar",

        "pricing.badge.early": "Preço de lançamento",
        "pricing.period.monthly": "Mensal",
        "pricing.period.yearly": "Anual",
        "pricing.save": "Economize 31%",
        "pricing.per.month": "/mês",
        "pricing.per.year": "/ano",

        "pricing.pro.title": "Pro",
        "pricing.pro.desc": "Múltiplos tokens, FULL, suporte prioritário.",
        "pricing.pro.f1": "Coletor + Treinador FULL",
        "pricing.pro.f2": "BUY/SELL com limiares e alertas",
        "pricing.pro.f3": "Suporte prioritário",
        "pricing.pro.bot": "Bot de execução automática (opcional)",
        "pricing.pro.cta": "Comprar licença",

        "pricing.refund.note": "Reembolso em 7 dias se a licença não foi ativada.",
        "pricing.tax.note": "Impostos podem se aplicar conforme o país.",

        "pricing.faq.title": "Perguntas frequentes",
        "pricing.faq.datasource.q": "De onde o TokenLens obtém os dados?",
        "pricing.faq.datasource.a": "Dos mercados das exchanges via APIs públicas (REST/WebSocket). REST para históricos (OHLCV/metadados) e WebSocket quando há streaming ao vivo (trades/order book). Não exigimos suas chaves para gerar sinais; apenas se você ativar o bot de execução (somente leitura + escopos mínimos). Você também pode importar seus próprios CSVs.",
        "pricing.faq.license.q": "Como recebo minha licença?",
        "pricing.faq.license.a": "Após a compra você receberá um arquivo .jwt por e-mail. Carregue em “Licença” no app.",
        "pricing.faq.device.q": "A licença é por PC?",
        "pricing.faq.device.a": "Sim, é por dispositivo. Se precisar mover, fale com o suporte.",

        "footer.product":"Produto","footer.legal":"Legal","footer.terms":"Termos","footer.privacy":"Privacidade","footer.thanks":"Obrigado",
        "footer.tagline":"Sinais cripto com modelos reais.","footer.news.title":"Novidades","footer.news.copy":"Avisamos raramente.","footer.news.btn":"Assinar","footer.copy":"© 2025 TokenLens"
      }
    };

    const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));
    const getLang = ()=>{
      const qs = new URLSearchParams(location.search).get('lang');
      const st = localStorage.getItem('lang');
      const nv = (navigator.language||'es').slice(0,2).toLowerCase();
      const src = (qs||st||nv);
      return src.startsWith('pt')?'pt': src.startsWith('en')?'en':'es';
    };

    const applyI18n = (lang)=>{
      const dict = translations[lang] || translations.es;
      document.documentElement.setAttribute('lang', lang);
      $$('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n');
        if (dict[k]) el.textContent = dict[k];
      });
      if (dict["meta.title"]) document.title = dict["meta.title"];
      const metaDesc = document.querySelector('meta[name="description"]');
      if (metaDesc){
        metaDesc.setAttribute('content',
          lang==='en' ? 'TokenLens plans: Trial and Pro. Crypto signals with in-house models.' :
          lang==='pt' ? 'Planos do TokenLens: Trial e Pro. Sinais cripto com modelos próprios.' :
                        'Planes de TokenLens: Trial y Pro. Señales y predicción cripto con modelos propios.'
        );
      }
      localStorage.setItem('lang', lang);
      const sel = document.getElementById('lang'); if (sel) sel.value = lang;

      // ajustar sufijo /mes /año del precio si se cambió idioma
      const per = currentPeriod === 'yearly' ? dict["pricing.per.year"] : dict["pricing.per.month"];
      document.getElementById('price-per').textContent = per || (currentPeriod==='yearly'?'/año':'/mes');
    };

    const keepLang = (lang)=>{
      $$('a[data-keep-lang]').forEach(a=>{
        const href = a.getAttribute('href')||'';
        if (!href || /^https?:\/\//i.test(href) || href.startsWith('mailto:')) return;
        const [base, hash] = href.split('#');
        const u = new URL(base, location.origin);
        u.searchParams.set('lang', lang);
        a.setAttribute('href', u.pathname.replace(/^\//,'') + u.search + (hash?('#'+hash):''));
      });
    };

    const markActive = ()=>{
      const here = (location.pathname.split('/').pop()||'precios.html').toLowerCase();
      $$('.site-links a').forEach(a=>{
        const base = (a.getAttribute('href')||'').split('?')[0].split('#')[0];
        const f = (base.split('/').pop()||'').toLowerCase();
        const active = f ? (f===here) : (here==='index.html');
        a.classList.toggle('active', active);
        if (active) a.setAttribute('aria-current','page'); else a.removeAttribute('aria-current');
      });
      const pr = document.querySelector('.site-links a[data-i18n="nav.pricing"]');
      if (pr) pr.classList.add('active');
    };

    // ===== Billing toggle logic =====
    let currentPeriod = localStorage.getItem('tl_billing') || 'monthly';
    const priceAmountEl = document.getElementById('price-amount');
    const pricePerEl = document.getElementById('price-per');
    const btnMonthly = document.getElementById('btn-monthly');
    const btnYearly = document.getElementById('btn-yearly');
    const checkoutBtn = document.getElementById('checkout-btn');

    function setPeriod(p){
      currentPeriod = p;
      localStorage.setItem('tl_billing', p);
      const lang = document.documentElement.getAttribute('lang') || getLang();
      const dict = translations[lang] || translations.es;

      if (p === 'yearly'){
        priceAmountEl.textContent = '199';
        pricePerEl.textContent = dict["pricing.per.year"] || '/año';
        checkoutBtn.setAttribute('href', 'https://tusitio.com/checkout?plan=pro&period=yearly&price=199');
        btnMonthly.classList.remove('active'); btnMonthly.setAttribute('aria-selected','false');
        btnYearly.classList.add('active'); btnYearly.setAttribute('aria-selected','true');
      } else {
        priceAmountEl.textContent = '24';
        pricePerEl.textContent = dict["pricing.per.month"] || '/mes';
        checkoutBtn.setAttribute('href', 'https://tusitio.com/checkout?plan=pro&period=monthly&price=24');
        btnYearly.classList.remove('active'); btnYearly.setAttribute('aria-selected','false');
        btnMonthly.classList.add('active'); btnMonthly.setAttribute('aria-selected','true');
      }
    }

    btnMonthly.addEventListener('click', ()=> setPeriod('monthly'));
    btnYearly.addEventListener('click', ()=> setPeriod('yearly'));

    // ===== Newsletter: redirige a /gracias con ?email=&lang=
    function wireNewsletter(lang){
      const form = document.getElementById('newsletter-form');
      if (!form) return;
      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const email = (document.getElementById('nl-email')?.value||'').trim();
        const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        if (!ok){
          alert(lang==='pt'?'Insira um e-mail válido': lang==='en'?'Enter a valid email':'Ingresá un email válido');
          return;
        }
        const url = new URL('gracias.html', location.href);
        url.searchParams.set('email', email);
        url.searchParams.set('lang', lang);
        location.href = url.toString();
      });
    }

    // init
    const initial = getLang();
    applyI18n(initial);
    keepLang(initial);
    markActive();
    setPeriod(currentPeriod);
    wireNewsletter(initial);

    // idioma
    document.getElementById('lang').addEventListener('change', e=>{
      const lang = e.target.value;
      applyI18n(lang);
      keepLang(lang);
      const url = new URL(location.href); url.searchParams.set('lang', lang);
      history.replaceState({},'',url);
      wireNewsletter(lang);
    });
  </script>
</body>
</html>

<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="meta.title">TokenLens – Precios</title>
  <meta name="description" content="Planes de TokenLens: Trial y Pro. Señales y predicción cripto con modelos propios.">
  <link rel="stylesheet" href="assets/styles.css">

  <!-- Estilos complementarios para header/footer y pricing (idénticos al resto) -->
  <style>
    /* ===== Cool Header ===== */
    .site-nav{ background:rgba(255,255,255,.02); border-bottom:1px solid #1f2a44; }
    .nav-wrap{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:16px; }
    .site-brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text); font-weight:700; }
    .site-brand img{ width:24px; height:24px; }
    .site-links{ display:flex; gap:18px; align-items:center; }
    .site-links a{ color:var(--muted); text-decoration:none; padding:8px 10px; border-radius:10px; border:1px solid transparent; background:transparent; }
    .site-links a:hover{ color:#fff; border-color:#233251; background:#0f131a; }
    .site-links a.active, .site-links a[aria-current="page"]{ color:var(--text); border-color:#2a3a5c; background:#0f131a; position:relative; }
    .site-links a.active::after{ content:""; position:absolute; left:10px; right:10px; bottom:-7px; height:2px; background:linear-gradient(90deg,var(--primary),var(--accent)); border-radius:2px; }

    .nav-cta{ display:flex; align-items:center; gap:12px; }
    .btn{ display:inline-block; padding:10px 14px; border-radius:12px; border:1px solid #24324d; color:var(--text); text-decoration:none; background:#151922; }
    .btn:hover{ border-color:#2b3a5f; }
    .btn.primary{ background:linear-gradient(135deg,var(--primary),var(--accent)); border:0; color:#061018; font-weight:700; }

    .lang-wrap{ position:relative; }
    .lang-select{ appearance:none; -webkit-appearance:none; -moz-appearance:none; padding:10px 34px 10px 12px; border-radius:12px; background:#0f131a; color:var(--text); border:1px solid #24324d; }
    .lang-select:focus{ outline:2px solid #6ea8fe; outline-offset:2px; }
    .lang-wrap .chev{ position:absolute; right:10px; top:50%; transform:translateY(-50%); pointer-events:none; color:var(--muted); font-size:12px; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* ===== Layout / Cards ===== */
    .card{ background:#0f131a; border:1px solid #1f2430; border-radius:16px; padding:18px; }
    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    .muted{ color:var(--muted); }

    /* ===== Pricing UI extra ===== */
    .price-wrap{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin:6px 0 12px; }
    .price{ display:flex; align-items:baseline; gap:6px; font-weight:800; }
    .price .currency{ opacity:.9; }
    .price .amount{ font-size:34px; line-height:1; }
    .price .per{ color:var(--muted); font-size:14px; }
    .badge{ display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid #233251; background:#0f131a; color:#9ec3ff; }
    .billing-toggle{ display:inline-flex; gap:4px; padding:4px; border:1px solid #233251; border-radius:12px; background:#0e1320; }
    .billing-toggle button{ border:0; padding:8px 10px; border-radius:8px; color:#cdd7ee; background:transparent; cursor:pointer; font-weight:600; }
    .billing-toggle button.active{ background:#101726; color:#fff; border:1px solid #2a3a5c; }
    .save{ color:#8bd5ff; font-size:12px; margin-left:4px; }

    /* Responsive */
    @media (max-width:900px){
      .nav-wrap{ flex-wrap:wrap; }
      .site-links{ order:3; width:100%; justify-content:center; padding:8px 0; }
      .nav-cta{ order:2; margin-left:auto; }
      .grid-2{ grid-template-columns:1fr; }
    }
  </style>
</head>
<body>

  <!-- HEADER (cool) -->
  <header class="site-nav">
    <div class="container nav-wrap">
      <a class="site-brand" href="index.html" data-keep-lang>
        <img src="assets/logo.svg" alt="TokenLens" onerror="this.style.display='none'">
        <span>TokenLens</span>
      </a>

      <nav class="site-links">
        <a href="index.html#features" data-keep-lang data-i18n="nav.features">Características</a>
        <a href="precios.html" data-keep-lang data-i18n="nav.pricing">Precios</a>
        <a href="docs/README.html" data-keep-lang data-i18n="nav.docs">Docs</a>
      </nav>

      <div class="nav-cta">
        <a class="btn" href="descarga.html" data-keep-lang data-i18n="nav.download">Descargar</a>
        <a class="btn primary" href="#buy" data-keep-lang data-i18n="nav.buy">Comprar licencia</a>

        <label for="lang" class="sr-only">Language</label>
        <div class="lang-wrap">
          <select id="lang" class="lang-select" aria-label="Language">
            <option value="es">Español</option>
            <option value="en">English</option>
            <option value="pt">Português</option>
          </select>
          <span class="chev" aria-hidden>▾</span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container" style="padding:24px 0 0">
    <h1 data-i18n="pricing.heading">Precios</h1>
    <p class="muted" data-i18n="pricing.lead">
      Elegí el plan que se adapta a tu operación. Podés empezar gratis y actualizar cuando quieras.
    </p>

    <div class="grid-2" style="margin-top:16px">
      <!-- TRIAL -->
      <div class="card">
        <h3 data-i18n="pricing.trial.title">Trial</h3>
        <p data-i18n="pricing.trial.desc">1 token, modo rápido, sin soporte.</p>
        <ul>
          <li data-i18n="pricing.trial.li1">Colector (quick)</li>
          <li data-i18n="pricing.trial.li2">Entrenador y Predictor básicos</li>
          <li data-i18n="pricing.trial.li3">Exportación CSV</li>
        </ul>
        <a class="btn" href="descarga.html" data-keep-lang data-i18n="pricing.trial.cta">Descargar</a>
      </div>

      <!-- PRO -->
      <div class="card" id="buy" style="outline:2px solid var(--primary)">
        <div class="price-wrap">
          <span class="badge" data-i18n="pricing.badge.early">Precio lanzamiento</span>
          <div class="billing-toggle" role="tablist" aria-label="Billing period">
            <button type="button" id="btn-monthly" class="active" data-period="monthly" aria-selected="true" data-i18n="pricing.period.monthly">Mensual</button>
            <button type="button" id="btn-yearly" data-period="yearly" aria-selected="false">
              <span data-i18n="pricing.period.yearly">Anual</span>
              <span class="save" data-i18n="pricing.save">Ahorra 31%</span>
            </button>
          </div>
        </div>

        <h3 data-i18n="pricing.pro.title">Pro</h3>
        <div class="price" aria-live="polite">
          <span class="currency">USD</span>
          <span class="amount" id="price-amount">24</span>
          <span class="per" id="price-per" data-i18n="pricing.per.month">/mes</span>
        </div>
        <p class="muted" data-i18n="pricing.pro.desc">Múltiples tokens, FULL, soporte prioritario.</p>
        <ul>
          <li data-i18n="pricing.pro.f1">Colector + Entrenador FULL</li>
          <li data-i18n="pricing.pro.f2">BUY/SELL con umbrales y alertas</li>
          <li data-i18n="pricing.pro.f3">Soporte prioritario</li>
          <li data-i18n="pricing.pro.bot">Bot de ejecución automática (opcional)</li>
        </ul>
        <div class="cta" style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn primary" id="checkout-btn" href="https://tusitio.com/checkout?plan=pro&period=monthly&price=24" data-i18n="pricing.pro.cta">Comprar licencia</a>
          <a class="btn" href="docs/README.html" data-keep-lang data-i18n="pricing.pro.details">Ver detalles técnicos</a>
        </div>
        <p class="muted" style="margin-top:8px; font-size:13px">
          <span data-i18n="pricing.refund.note">Garantía: reembolso 7 días si no activaste la licencia.</span>
          <br><span data-i18n="pricing.tax.note">Impuestos pueden aplicar según tu país.</span>
        </p>
      </div>
    </div>

    <!-- FAQ -->
    <section class="card" style="margin-top:22px">
      <h3 data-i18n="pricing.faq.title">Preguntas frecuentes</h3>

      <h4 style="margin-top:10px" data-i18n="pricing.faq.datasource.q">¿De dónde recolecta datos TokenLens?</h4>
      <p class="muted" data-i18n="pricing.faq.datasource.a">
        Del mercado de exchanges vía APIs públicas (REST/WebSocket). Usamos REST para históricos (OHLCV/metadata)
        y WebSocket cuando hay streaming en vivo (trades/order book). No requerimos tus claves para generar señales;
        sólo si activás el bot de ejecución (read-only + permisos mínimos). También podés importar CSV propios.
      </p>

      <h4 style="margin-top:10px" data-i18n="pricing.faq.license.q">¿Cómo recibo mi licencia?</h4>
      <p class="muted" data-i18n="pricing.faq.license.a">
        Luego del pago te llega un archivo .jwt por email. Lo cargás en “Licencia” dentro de la app.
      </p>

      <h4 style="margin-top:10px" data-i18n="pricing.faq.device.q">¿La licencia es por PC?</h4>
      <p class="muted" data-i18n="pricing.faq.device.a">
        Sí, es por dispositivo. Si necesitás moverla, escribinos a soporte.
      </p>
    </section>
  </main>

  <!-- FOOTER (unificado con iconos CSS y newsletter) -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-col">
        <a class="site-brand" href="index.html" data-keep-lang>
          <img src="assets/logo.svg" alt="TokenLens" onerror="this.style.display='none'">
          <span>TokenLens</span>
        </a>
        <p class="muted" data-i18n="footer.tagline">Señales cripto con modelos reales.</p>

        <div class="social">
          <a href="https://x.com/tucuenta"  data-icon="x"  target="_blank" rel="noopener">Twitter</a>
          <a href="https://youtube.com/@tu"  data-icon="yt" target="_blank" rel="noopener">YouTube</a>
          <a href="https://t.me/tucanal"     data-icon="tg" target="_blank" rel="noopener">Telegram</a>
        </div>
      </div>

      <div class="footer-col">
        <h4 data-i18n="footer.product">Producto</h4>
        <ul class="footer-links">
          <li><a href="descarga.html" data-keep-lang data-i18n="nav.download">Descargar</a></li>
          <li><a href="precios.html" data-keep-lang data-i18n="nav.pricing">Precios</a></li>
          <li><a href="docs/README.html" data-keep-lang data-i18n="nav.docs">Docs</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4 data-i18n="footer.legal">Legal</h4>
        <ul class="footer-links">
          <li><a href="terminos.html" data-keep-lang data-i18n="footer.terms">Términos</a></li>
          <li><a href="privacidad.html" data-keep-lang data-i18n="footer.privacy">Privacidad</a></li>
          <li><a href="gracias.html" data-keep-lang data-i18n="footer.thanks">Gracias</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4 data-i18n="footer.news.title">Novedades</h4>
        <p class="muted" data-i18n="footer.news.copy">Te avisamos muy de vez en cuando.</p>
        <form id="newsletter-form">
          <input id="nl-email" type="email" required placeholder="tu@email.com" class="nl-input">
          <button class="btn primary" type="submit" data-i18n="footer.news.btn">Suscribirme</button>
        </form>
      </div>
    </div>

    <div class="container legal-bar">
      <span class="muted small" data-i18n="footer.copy">© 2025 TokenLens</span>
      <span class="muted small">v1</span>
    </div>
  </footer>

  <!-- i18n + lang persist + active link + billing toggle + newsletter -->
  <script>
    const translations = {
      es: {
        "meta.title": "TokenLens – Precios",
        "nav.features": "Características", "nav.pricing": "Precios", "nav.docs": "Docs",
        "nav.download": "Descargar", "nav.buy": "Comprar licencia",
        "pricing.heading": "Precios",
        "pricing.lead": "Elegí el plan que se adapta a tu operación. Podés empezar gratis y actualizar cuando quieras.",
        "pricing.trial.title": "Trial", "pricing.trial.desc": "1 token, modo rápido, sin soporte.",
        "pricing.trial.li1": "Colector (quick)", "pricing.trial.li2": "Entrenador y Predictor básicos", "pricing.trial.li3": "Exportación CSV",
        "pricing.trial.cta": "Descargar",

        "pricing.badge.early": "Precio lanzamiento",
        "pricing.period.monthly": "Mensual",
        "pricing.period.yearly": "Anual",
        "pricing.save": "Ahorra 31%",
        "pricing.per.month": "/mes",
        "pricing.per.year": "/año",

        "pricing.pro.title": "Pro",
        "pricing.pro.desc": "Múltiples tokens, FULL, soporte prioritario.",
        "pricing.pro.f1": "Colector + Entrenador FULL",
        "pricing.pro.f2": "BUY/SELL con umbrales y alertas",
        "pricing.pro.f3": "Soporte prioritario",
        "pricing.pro.bot": "Bot de ejecución automática (opcional)",
        "pricing.pro.cta": "Comprar licencia",

        "pricing.refund.note": "Garantía: reembolso 7 días si no activaste la licencia.",
        "pricing.tax.note": "Impuestos pueden aplicar según tu país.",

        "pricing.faq.title": "Preguntas frecuentes",
        "pricing.faq.datasource.q": "¿De dónde recolecta datos TokenLens?",
        "pricing.faq.datasource.a": "Del mercado de exchanges vía APIs públicas (REST/WebSocket). Usamos REST para históricos (OHLCV/metadata) y WebSocket cuando hay streaming en vivo (trades/order book). No requerimos tus claves para generar señales; sólo si activás el bot de ejecución (read-only + permisos mínimos). También podés importar CSV propios.",
        "pricing.faq.license.q": "¿Cómo recibo mi licencia?",
        "pricing.faq.license.a": "Luego del pago te llega un archivo .jwt por email. Lo cargás en “Licencia” dentro de la app.",
        "pricing.faq.device.q": "¿La licencia es por PC?",
        "pricing.faq.device.a": "Sí, es por dispositivo. Si necesitás moverla, escribinos a soporte.",

        "footer.product":"Producto","footer.legal":"Legal","footer.terms":"Términos","footer.privacy":"Privacidad","footer.thanks":"Gracias",
        "footer.tagline":"Señales cripto con modelos reales.","footer.news.title":"Novedades","footer.news.copy":"Te avisamos muy de vez en cuando.","footer.news.btn":"Suscribirme","footer.copy":"© 2025 TokenLens"
      },
      en: {
        "meta.title": "TokenLens – Pricing",
        "nav.features": "Features", "nav.pricing": "Pricing", "nav.docs": "Docs",
        "nav.download": "Download", "nav.buy": "Buy license",
        "pricing.heading": "Pricing",
        "pricing.lead": "Choose the plan that fits your workflow. Start free and upgrade anytime.",
        "pricing.trial.title": "Trial", "pricing.trial.desc": "1 token, quick mode, no support.",
        "pricing.trial.li1": "Collector (quick)", "pricing.trial.li2": "Basic Trainer & Predictor", "pricing.trial.li3": "CSV export",
        "pricing.trial.cta": "Download",

        "pricing.badge.early": "Early-bird",
        "pricing.period.monthly": "Monthly",
        "pricing.period.yearly": "Yearly",
        "pricing.save": "Save 31%",
        "pricing.per.month": "/mo",
        "pricing.per.year": "/yr",

        "pricing.pro.title": "Pro",
        "pricing.pro.desc": "Multiple tokens, FULL mode, priority support.",
        "pricing.pro.f1": "Collector + FULL Trainer",
        "pricing.pro.f2": "BUY/SELL with thresholds & alerts",
        "pricing.pro.f3": "Priority support",
        "pricing.pro.bot": "Automated execution bot (optional)",
        "pricing.pro.cta": "Buy license",

        "pricing.refund.note": "7-day refund if the license wasn’t activated.",
        "pricing.tax.note": "Taxes may apply depending on your country.",

        "pricing.faq.title": "FAQ",
        "pricing.faq.datasource.q": "Where does TokenLens get its data from?",
        "pricing.faq.datasource.a": "From exchange markets via public APIs (REST/WebSocket). REST for historicals (OHLCV/metadata) and WebSocket when live streaming is available (trades/order book). No API keys are required for signal generation; only if you enable the execution bot (read-only + minimum scopes). You can also import your own CSVs.",
        "pricing.faq.license.q": "How do I receive my license?",
        "pricing.faq.license.a": "After purchase you'll receive a .jwt file by email. Load it under “License” in the app.",
        "pricing.faq.device.q": "Is the license per PC?",
        "pricing.faq.device.a": "Yes, it's per device. If you need to move it, contact support.",

        "footer.product":"Product","footer.legal":"Legal","footer.terms":"Terms","footer.privacy":"Privacy","footer.thanks":"Thanks",
        "footer.tagline":"Real models. Real crypto signals.","footer.news.title":"Newsletter","footer.news.copy":"We’ll ping you rarely.","footer.news.btn":"Subscribe","footer.copy":"© 2025 TokenLens"
      },
      pt: {
        "meta.title": "TokenLens – Preços",
        "nav.features": "Recursos", "nav.pricing": "Preços", "nav.docs": "Docs",
        "nav.download": "Baixar", "nav.buy": "Comprar licença",
        "pricing.heading": "Preços",
        "pricing.lead": "Escolha o plano que se adapta à sua operação. Comece grátis e atualize quando quiser.",
        "pricing.trial.title": "Trial", "pricing.trial.desc": "1 token, modo rápido, sem suporte.",
        "pricing.trial.li1": "Coletor (quick)", "pricing.trial.li2": "Treinador e Previsor básicos", "pricing.trial.li3": "Exportação CSV",
        "pricing.trial.cta": "Baixar",

        "pricing.badge.early": "Preço de lançamento",
        "pricing.period.monthly": "Mensal",
        "pricing.period.yearly": "Anual",
        "pricing.save": "Economize 31%",
        "pricing.per.month": "/mês",
        "pricing.per.year": "/ano",

        "pricing.pro.title": "Pro",
        "pricing.pro.desc": "Múltiplos tokens, FULL, suporte prioritário.",
        "pricing.pro.f1": "Coletor + Treinador FULL",
        "pricing.pro.f2": "BUY/SELL com limiares e alertas",
        "pricing.pro.f3": "Suporte prioritário",
        "pricing.pro.bot": "Bot de execução automática (opcional)",
        "pricing.pro.cta": "Comprar licença",

        "pricing.refund.note": "Reembolso em 7 dias se a licença não foi ativada.",
        "pricing.tax.note": "Impostos podem se aplicar conforme o país.",

        "pricing.faq.title": "Perguntas frequentes",
        "pricing.faq.datasource.q": "De onde o TokenLens obtém os dados?",
        "pricing.faq.datasource.a": "Dos mercados das exchanges via APIs públicas (REST/WebSocket). REST para históricos (OHLCV/metadados) e WebSocket quando há streaming ao vivo (trades/order book). Não exigimos suas chaves para gerar sinais; apenas se você ativar o bot de execução (somente leitura + escopos mínimos). Você também pode importar seus próprios CSVs.",
        "pricing.faq.license.q": "Como recebo minha licença?",
        "pricing.faq.license.a": "Após a compra você receberá um arquivo .jwt por e-mail. Carregue em “Licença” no app.",
        "pricing.faq.device.q": "A licença é por PC?",
        "pricing.faq.device.a": "Sim, é por dispositivo. Se precisar mover, fale com o suporte.",

        "footer.product":"Produto","footer.legal":"Legal","footer.terms":"Termos","footer.privacy":"Privacidade","footer.thanks":"Obrigado",
        "footer.tagline":"Sinais cripto com modelos reais.","footer.news.title":"Novidades","footer.news.copy":"Avisamos raramente.","footer.news.btn":"Assinar","footer.copy":"© 2025 TokenLens"
      }
    };

    const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));
    const getLang = ()=>{
      const qs = new URLSearchParams(location.search).get('lang');
      const st = localStorage.getItem('lang');
      const nv = (navigator.language||'es').slice(0,2).toLowerCase();
      const src = (qs||st||nv);
      return src.startsWith('pt')?'pt': src.startsWith('en')?'en':'es';
    };

    const applyI18n = (lang)=>{
      const dict = translations[lang] || translations.es;
      document.documentElement.setAttribute('lang', lang);
      $$('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n');
        if (dict[k]) el.textContent = dict[k];
      });
      if (dict["meta.title"]) document.title = dict["meta.title"];
      const metaDesc = document.querySelector('meta[name="description"]');
      if (metaDesc){
        metaDesc.setAttribute('content',
          lang==='en' ? 'TokenLens plans: Trial and Pro. Crypto signals with in-house models.' :
          lang==='pt' ? 'Planos do TokenLens: Trial e Pro. Sinais cripto com modelos próprios.' :
                        'Planes de TokenLens: Trial y Pro. Señales y predicción cripto con modelos propios.'
        );
      }
      localStorage.setItem('lang', lang);
      const sel = document.getElementById('lang'); if (sel) sel.value = lang;

      // ajustar sufijo /mes /año del precio si se cambió idioma
      const per = currentPeriod === 'yearly' ? dict["pricing.per.year"] : dict["pricing.per.month"];
      document.getElementById('price-per').textContent = per || (currentPeriod==='yearly'?'/año':'/mes');
    };

    const keepLang = (lang)=>{
      $$('a[data-keep-lang]').forEach(a=>{
        const href = a.getAttribute('href')||'';
        if (!href || /^https?:\/\//i.test(href) || href.startsWith('mailto:')) return;
        const [base, hash] = href.split('#');
        const u = new URL(base, location.origin);
        u.searchParams.set('lang', lang);
        a.setAttribute('href', u.pathname.replace(/^\//,'') + u.search + (hash?('#'+hash):''));
      });
    };

    const markActive = ()=>{
      const here = (location.pathname.split('/').pop()||'precios.html').toLowerCase();
      $$('.site-links a').forEach(a=>{
        const base = (a.getAttribute('href')||'').split('?')[0].split('#')[0];
        const f = (base.split('/').pop()||'').toLowerCase();
        const active = f ? (f===here) : (here==='index.html');
        a.classList.toggle('active', active);
        if (active) a.setAttribute('aria-current','page'); else a.removeAttribute('aria-current');
      });
      const pr = document.querySelector('.site-links a[data-i18n="nav.pricing"]');
      if (pr) pr.classList.add('active');
    };

    // ===== Billing toggle logic =====
    let currentPeriod = localStorage.getItem('tl_billing') || 'monthly';
    const priceAmountEl = document.getElementById('price-amount');
    const pricePerEl = document.getElementById('price-per');
    const btnMonthly = document.getElementById('btn-monthly');
    const btnYearly = document.getElementById('btn-yearly');
    const checkoutBtn = document.getElementById('checkout-btn');

    function setPeriod(p){
      currentPeriod = p;
      localStorage.setItem('tl_billing', p);
      const lang = document.documentElement.getAttribute('lang') || getLang();
      const dict = translations[lang] || translations.es;

      if (p === 'yearly'){
        priceAmountEl.textContent = '199';
        pricePerEl.textContent = dict["pricing.per.year"] || '/año';
        checkoutBtn.setAttribute('href', 'https://tusitio.com/checkout?plan=pro&period=yearly&price=199');
        btnMonthly.classList.remove('active'); btnMonthly.setAttribute('aria-selected','false');
        btnYearly.classList.add('active'); btnYearly.setAttribute('aria-selected','true');
      } else {
        priceAmountEl.textContent = '24';
        pricePerEl.textContent = dict["pricing.per.month"] || '/mes';
        checkoutBtn.setAttribute('href', 'https://tusitio.com/checkout?plan=pro&period=monthly&price=24');
        btnYearly.classList.remove('active'); btnYearly.setAttribute('aria-selected','false');
        btnMonthly.classList.add('active'); btnMonthly.setAttribute('aria-selected','true');
      }
    }

    btnMonthly.addEventListener('click', ()=> setPeriod('monthly'));
    btnYearly.addEventListener('click', ()=> setPeriod('yearly'));

    // ===== Newsletter: redirige a /gracias con ?email=&lang=
    function wireNewsletter(lang){
      const form = document.getElementById('newsletter-form');
      if (!form) return;
      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const email = (document.getElementById('nl-email')?.value||'').trim();
        const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        if (!ok){
          alert(lang==='pt'?'Insira um e-mail válido': lang==='en'?'Enter a valid email':'Ingresá un email válido');
          return;
        }
        const url = new URL('gracias.html', location.href);
        url.searchParams.set('email', email);
        url.searchParams.set('lang', lang);
        location.href = url.toString();
      });
    }

    // init
    const initial = getLang();
    applyI18n(initial);
    keepLang(initial);
    markActive();
    setPeriod(currentPeriod);
    wireNewsletter(initial);

    // idioma
    document.getElementById('lang').addEventListener('change', e=>{
      const lang = e.target.value;
      applyI18n(lang);
      keepLang(lang);
      const url = new URL(location.href); url.searchParams.set('lang', lang);
      history.replaceState({},'',url);
      wireNewsletter(lang);
    });
  </script>
</body>
</html>

