<!-- footer.html -->
<footer class="site-footer">
  <div class="container footer-grid">
    <!-- Brand + tagline + socials -->
    <div class="footer-col">
      <a class="site-brand" href="index.html" data-keep-lang aria-label="TokenLens – inicio">
        <img src="assets/logo.svg" alt="TokenLens" onerror="this.style.display='none'" loading="lazy">
        <span>TokenLens</span>
      </a>
      <p class="muted" data-i18n="footer.tagline">Señales cripto con modelos reales.</p>

      <!-- Redes (icono por CSS vía data-icon) -->
      <div class="social">
        <a href="https://x.com/tucuenta" data-icon="x" target="_blank" rel="noopener nofollow" aria-label="X / Twitter">Twitter</a>
        <a href="https://youtube.com/@tu" data-icon="yt" target="_blank" rel="noopener nofollow" aria-label="YouTube">YouTube</a>
        <a href="https://t.me/tucanal" data-icon="tg" target="_blank" rel="noopener nofollow" aria-label="Telegram">Telegram</a>
      </div>
    </div>

    <!-- Producto -->
    <div class="footer-col">
      <h4>Producto</h4>
      <ul class="footer-links">
        <li><a href="descarga.html" data-keep-lang data-i18n="nav.download">Descargar</a></li>
        <li><a href="precios.html" data-keep-lang data-i18n="nav.pricing">Precios</a></li>
        <li><a href="docs/README.html" data-keep-lang data-i18n="nav.docs">Docs</a></li>
      </ul>
    </div>

    <!-- Legal -->
    <div class="footer-col">
      <h4>Legal</h4>
      <ul class="footer-links">
        <li><a href="terminos.html" data-keep-lang data-i18n="footer.terms">Términos</a></li>
        <li><a href="privacidad.html" data-keep-lang data-i18n="footer.privacy">Privacidad</a></li>
        <li><a href="gracias.html" data-keep-lang data-i18n="footer.thanks">Gracias</a></li>
      </ul>
    </div>

    <!-- Newsletter -->
    <div class="footer-col">
      <h4 data-i18n="footer.news.title">Novedades</h4>
      <p class="muted" data-i18n="footer.news.copy">Te avisamos muy de vez en cuando.</p>
      <form id="newsletter-form" novalidate>
        <input id="nl-email" type="email" required placeholder="tu@email.com" class="nl-input" autocomplete="email" inputmode="email" aria-label="Tu email">
        <button class="btn primary" type="submit" data-i18n="footer.news.btn">Suscribirme</button>
      </form>
    </div>
  </div>

  <div class="container legal-bar">
    <span class="muted small" id="copyright">© <span id="year"></span> TokenLens</span>
    <span class="muted small" id="footer-version">v1</span>
  </div>
</footer>

<style>
/* ===== Cool Footer (estructura visual; los íconos se pintan desde assets/styles.css) ===== */
.site-footer{
  border-top:1px solid #1f2a44;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.005));
  padding:28px 0 16px;
  margin-top:40px;
}
.footer-grid{
  display:grid; gap:18px;
  grid-template-columns:1.6fr 1fr 1fr 1.4fr;
}
.footer-col h4{ margin:0 0 10px; font-size:14px; letter-spacing:.3px; text-transform:uppercase; color:#cfe0ff; }
.footer-col .muted{ color:var(--muted); }
.footer-links{ list-style:none; padding:0; margin:0; }
.footer-links li{ margin:6px 0; }
.footer-links a{ color:var(--muted); text-decoration:none; }
.footer-links a:hover{ color:#fff; }

.site-footer .site-brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text); font-weight:700; }
.site-footer .site-brand img{ width:22px; height:22px; }

.social{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
.social a{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 10px; border:1px solid #1f2a44; border-radius:10px;
  color:var(--muted); text-decoration:none; background:var(--panel);
  transition:transform .15s ease, border-color .15s ease, color .15s ease;
}
.social a:hover{ color:#fff; border-color:#2b3a5f; transform:translateY(-1px); }

.nl-input{
  width:100%; padding:10px 12px; border-radius:10px; margin-bottom:8px;
  background:#0f131a; color:var(--text); border:1px solid #1f2a44;
}

.legal-bar{
  border-top:1px solid #1f2a44; margin-top:18px; padding-top:14px;
  display:flex; justify-content:space-between; align-items:center;
}
.small{ font-size:13px; } .muted{ color:var(--muted); }

@media (max-width:900px){
  .footer-grid{ grid-template-columns:1fr; }
}
</style>

<script>
/* ===== Footer logic: lang en links, newsletter demo, año dinámico ===== */
(function(){
  if (window.__tlFooterInited) return; window.__tlFooterInited = true;
  const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));

  // Año dinámico
  const y = document.getElementById('year');
  if (y) y.textContent = new Date().getFullYear();

  // Idioma
  const getLang = ()=>{
    const qs = new URLSearchParams(location.search).get('lang');
    const st = localStorage.getItem('lang');
    const nv = (navigator.language||'es').slice(0,2).toLowerCase();
    const src = (qs||st||nv);
    return src.startsWith('pt')?'pt': src.startsWith('en')?'en':'es';
  };
  const lang = getLang();

  // Mantener ?lang= en links internos (convierte a rutas absolutas desde origen)
  $$('a[data-keep-lang]').forEach(a=>{
    const href = a.getAttribute('href')||'';
    if (!href || /^https?:\/\//i.test(href) || href.startsWith('mailto:')) return;
    const [base, hash] = href.split('#');
    const u = new URL(base, location.origin);
    u.searchParams.set('lang', lang);
    a.setAttribute('href', u.pathname.replace(/^\//,'') + u.search + (hash?('#'+hash):''));
  });

  // Newsletter demo: redirige a /gracias con ?email=&lang=
  const form = document.getElementById('newsletter-form');
  form && form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const email = (document.getElementById('nl-email')?.value||'').trim();
    const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    if (!ok){
      alert(lang==='pt'?'Insira um e-mail válido': lang==='en'?'Enter a valid email':'Ingresá un email válido');
      return;
    }
    const url = new URL('gracias.html', location.origin + '/');
    url.searchParams.set('email', email);
    url.searchParams.set('lang', lang);
    location.href = url.toString();
  });
})();
</script>
